$def with (person, wunsch)
<!--
<ul class="list-group" id="users">
</ul>
<script type="application/javascript">add_load_handler(load_personal);</script>
-->

<h1>$person.name $person.vorname ($person.kuerzel)</h1>
<style type="text/css">
	.portrait {
		background-image: url(/image/$person.pid);
		background-repeat: no-repeat; 
		background-size: 100% auto;
	}
</style>


<div class="row">
	<div class="col-sm-4 col-xs-12">
		
		<div class="portrait">
			<div class="inner">
		  <span class="btn btn-info fileinput-button">
		      <span class="glyphicon glyphicon-camera" style="font-size: 3em;"></span>
		      <!-- The file input field used as target for the file upload widget -->
		      <input id="fileupload" type="file" name="file" accept="image/*;capture=camera"/>
		  </span>
		  </div>
		</div>
		
    <!-- The global progress bar -->
    <div id="progress" class="progress" style="display: none">
        <div class="progress-bar progress-bar-success"></div>
    </div>	
		<br />
		<br />
		
		
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">WÃ¼nsche</div>

  <!-- Table -->
  <table class="table">
    <thead>
    	<tr>
    		<th>Prio</th>
    		<th>Rotation</th>
    	</tr>
    </thead>
    <tbody>
    $for w in wunsch:
    	<tr>
    		<td class="prio">$:wunsch_prio(w.prio)</td>
    		<td>$w.rot.name</td>
    	</tr>
    	
    	
    </tbody>
  </table>
</div>
		
		
	</div>
	<div class="col-sm-4 col-xs-12">
		Notes
	</div>
	<div class="col-sm-4 col-xs-12">
		Vertrag
	</div>
</div>

<script>
function init_upload() {
	/*jslint unparam: true */
	/*global window, $$ */
	$$(function () {
		  'use strict';
		  // Change this to the location of your server-side upload handler:
		  var url = '/image';
		  $$('#fileupload').fileupload({
		      url: url,
		      dataType: 'json',
		      done: function (e, data) {
		          $$.each(data.result.files, function (index, file) {
		              //$$('<p/>').text(file.name).appendTo('#file');
		          });
		          $$('#progress').css("display", "none");
		          alert("done")
		      },
		      progressall: function (e, data) {
		          $$('#progress').css("display", "block");
		          //alert("progress")
		          var progress = parseInt(data.loaded / data.total * 100, 10);
		          $$('#progress .progress-bar').css(
		              'width',
		              progress + '%'
		          );
		      },
		      fail: function (e, data) {
	          $$('#progress').css("display", "none");
		      	alert("Failed, need to send proper response from serevr")
		      }
		  }).prop('disabled', !$$.support.fileInput)
		      .parent().addClass($$.support.fileInput ? undefined : 'disabled');
	});
}
add_load_handler(init_upload);
</script>
